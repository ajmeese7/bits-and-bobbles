<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><link rel="icon" href="/bits-and-bobbles/favicon.ico"/><title>Dodge the Lasers</title><meta name="robots" content="index,follow"/><meta name="googlebot" content="index,follow"/><meta name="description" content="Personal Knowledge Space"/><meta property="og:title" content="Dodge the Lasers"/><meta property="og:description" content="Personal Knowledge Space"/><meta property="og:url" content="https://ajmeese7.github.io/bits-and-bobbles/notes/zer6szds0we2lk3340ffup2/"/><meta property="og:type" content="article"/><meta property="article:published_time" content="10/15/2022"/><meta property="article:modified_time" content="10/19/2022"/><meta property="article:tag" content="python"/><meta property="article:tag" content="level-5"/><meta property="article:tag" content="foobar"/><meta property="article:tag" content="google"/><link rel="canonical" href="https://ajmeese7.github.io/bits-and-bobbles/notes/zer6szds0we2lk3340ffup2/"/><meta name="next-head-count" content="18"/><link rel="preload" href="/bits-and-bobbles/_next/static/css/deec11e9c2bd4133.css" as="style"/><link rel="stylesheet" href="/bits-and-bobbles/_next/static/css/deec11e9c2bd4133.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/bits-and-bobbles/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/bits-and-bobbles/_next/static/chunks/webpack-666bb7145d55a8e3.js" defer=""></script><script src="/bits-and-bobbles/_next/static/chunks/framework-28c999baf2863c3d.js" defer=""></script><script src="/bits-and-bobbles/_next/static/chunks/main-d503f293d35eecc6.js" defer=""></script><script src="/bits-and-bobbles/_next/static/chunks/pages/_app-7d6926b536875769.js" defer=""></script><script src="/bits-and-bobbles/_next/static/chunks/935-4dee79e80b8641c6.js" defer=""></script><script src="/bits-and-bobbles/_next/static/chunks/6-50972def09142ee2.js" defer=""></script><script src="/bits-and-bobbles/_next/static/chunks/pages/notes/%5Bid%5D-78d472fa3b924116.js" defer=""></script><script src="/bits-and-bobbles/_next/static/dO-yYPXKcLZfhjFGAxUDT/_buildManifest.js" defer=""></script><script src="/bits-and-bobbles/_next/static/dO-yYPXKcLZfhjFGAxUDT/_ssgManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><section class="ant-layout" style="width:100%;min-height:100%"><header class="ant-layout-header" style="position:fixed;isolation:isolate;z-index:1;width:100%;border-bottom:1px solid #d4dadf;height:64px;padding:0 24px 0 2px"><div class="ant-row ant-row-center" style="max-width:992px;justify-content:space-between;margin:0 auto"><div style="display:flex" class="ant-col ant-col-xs-20 ant-col-sm-4"></div><div class="ant-col gutter-row ant-col-xs-0 ant-col-sm-20 ant-col-md-20 ant-col-lg-19"><div class="ant-select ant-select-lg ant-select-auto-complete ant-select-single ant-select-allow-clear ant-select-show-search" style="width:100%"><div class="ant-select-selector"><span class="ant-select-selection-search"><input type="search" autoComplete="off" class="ant-select-selection-search-input" role="combobox" aria-haspopup="listbox" aria-owns="undefined_list" aria-autocomplete="list" aria-controls="undefined_list" aria-activedescendant="undefined_list_0" value=""/></span><span class="ant-select-selection-placeholder">For full text search please use the &#x27;?&#x27; prefix. e.g. ? Onboarding</span></div></div></div><div style="display:none;align-items:center;justify-content:center" class="ant-col ant-col-xs-4 ant-col-sm-4 ant-col-md-0 ant-col-lg-0"><span role="img" aria-label="menu" style="font-size:24px" tabindex="-1" class="anticon anticon-menu"><svg viewBox="64 64 896 896" focusable="false" data-icon="menu" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M904 160H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0 624H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0-312H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8z"></path></svg></span></div></div></header><section class="ant-layout" style="margin-top:64px;display:flex;flex-direction:row"><div class="site-layout-sidebar" style="flex:0 0 auto;width:calc(max((100% - 992px) / 2, 0px) + 200px);min-width:200px;padding-left:calc((100% - 992px) / 2)"><aside class="ant-layout-sider ant-layout-sider-dark" style="position:fixed;overflow:auto;height:calc(100vh - 64px);background-color:transparent;flex:0 0 200px;max-width:200px;min-width:200px;width:200px"><div class="ant-layout-sider-children"></div></aside></div><main class="ant-layout-content side-layout-main" style="max-width:1200px;min-width:0;display:block"><div style="padding:0 24px"><div class="main-content" role="main"><div class="ant-row"><div class="ant-col ant-col-24"><div class="ant-row" style="margin-left:-10px;margin-right:-10px"><div style="padding-left:10px;padding-right:10px" class="ant-col ant-col-xs-24 ant-col-md-18"><div><h1 id="dodge-the-lasers"><a aria-hidden="true" class="anchor-heading icon-link" href="#dodge-the-lasers"></a>Dodge the Lasers</h1>
<h2 id="instructions"><a aria-hidden="true" class="anchor-heading icon-link" href="#instructions"></a>Instructions</h2>
<p>Oh no! You've managed to escape Commander Lambda's collapsing space station in an escape pod with the rescued bunny workers - but Commander Lambda isnt about to let you get away that easily. Lambda sent an elite fighter pilot squadron after you -- and they've opened fire!</p>
<p>Fortunately, you know something important about the ships trying to shoot you down. Back when you were still Lambda's assistant, the Commander asked you to help program the aiming mechanisms for the starfighters. They undergo rigorous testing procedures, but you were still able to slip in a subtle bug. The software works as a time step simulation: if it is tracking a target that is accelerating away at 45 degrees, the software will consider the targets acceleration to be equal to the square root of 2, adding the calculated result to the targets end velocity at each timestep. However, thanks to your bug, instead of storing the result with proper precision, it will be truncated to an integer before adding the new velocity to your current position.  This means that instead of having your correct position, the targeting software will erringly report your position as <code>sum(i=1..n, floor(i*sqrt(2)))</code> - not far enough off to fail Commander Lambdas testing, but enough that it might just save your life.</p>
<p>If you can quickly calculate the target of the starfighters' laser beams to know how far off they'll be, you can trick them into shooting an asteroid, releasing dust, and concealing the rest of your escape.  Write a function solution(str_n) which, given the string representation of an integer n, returns the sum of <code>(floor(1*sqrt(2)) + floor(2*sqrt(2)) + ... + floor(n*sqrt(2)))</code> as a string. That is, for every number i in the range 1 to n, it adds up all of the integer portions of <code>i*sqrt(2)</code>.</p>
<p>For example, if str_n was "5", the solution would be calculated as</p>
<pre class="language-text"><code class="language-text">floor(1*sqrt(2)) +
floor(2*sqrt(2)) +
floor(3*sqrt(2)) +
floor(4*sqrt(2)) +
floor(5*sqrt(2))
= 1+2+4+5+7 = 19
</code></pre>
<p>so the function would return "19".</p>
<p>str_n will be a positive integer between 1 and 10^100, inclusive. Since n can be very large (up to 101 digits!), using just sqrt(2) and a loop won't work. Sometimes, it's easier to take a step back and concentrate not on what you have in front of you, but on what you don't.</p>
<h3 id="test-cases"><a aria-hidden="true" class="anchor-heading icon-link" href="#test-cases"></a>Test cases</h3>
<p>Your code should pass the following test cases.</p>
<p>Note that it may also be run against hidden test cases not shown here.</p>
<p>Input: <code>solution.solution('77')</code></p>
<p>Output: <code>4208</code></p>
<p>Input: <code>solution.solution('5')</code></p>
<p>Output: <code>19</code></p>
<h2 id="solution"><a aria-hidden="true" class="anchor-heading icon-link" href="#solution"></a>Solution</h2>
<p>Given infinite time and resources, the following would work perfectly:</p>
<pre class="language-py"><code class="language-py"><span class="token keyword">from</span> math <span class="token keyword">import</span> sqrt<span class="token punctuation">,</span> floor

<span class="token keyword">def</span> <span class="token function">solution</span><span class="token punctuation">(</span>str_n<span class="token punctuation">)</span><span class="token punctuation">:</span>
    n <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>str_n<span class="token punctuation">)</span>
    mod <span class="token operator">=</span> sqrt<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token builtin">str</span><span class="token punctuation">(</span><span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">(</span>floor<span class="token punctuation">(</span>x <span class="token operator">*</span> mod<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">for</span> x <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment"># Test cases</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>solution<span class="token punctuation">(</span><span class="token string">"5"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># 19</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>solution<span class="token punctuation">(</span><span class="token string">"77"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># 4208</span>
</code></pre>
<p>However, this is not the case. The test cases are very large, and the time limit is very short. We need to find a way to optimize this.</p>
<p>After doing some research (I am not yet very well-versed in mathematics), I was able to finalize the following solution:</p>
<pre class="language-py"><code class="language-py"><span class="token keyword">from</span> decimal <span class="token keyword">import</span> Decimal<span class="token punctuation">,</span> localcontext

<span class="token comment"># https://towardsdatascience.com/dodge-the-lasers-fantastic-question-from-googles-hiring-challenge-72363d95fec</span>
<span class="token keyword">def</span> <span class="token function">solution</span><span class="token punctuation">(</span>str_n<span class="token punctuation">)</span><span class="token punctuation">:</span>
    n <span class="token operator">=</span> Decimal<span class="token punctuation">(</span>str_n<span class="token punctuation">)</span>
    <span class="token keyword">with</span> localcontext<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> ctx<span class="token punctuation">:</span>
        ctx<span class="token punctuation">.</span>prec <span class="token operator">=</span> <span class="token number">101</span>
        r <span class="token operator">=</span> Decimal<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span>sqrt<span class="token punctuation">(</span><span class="token punctuation">)</span>
        s <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">+</span> r

        <span class="token comment"># https://en.wikipedia.org/wiki/Beatty_sequence</span>
        <span class="token keyword">def</span> <span class="token function">solve</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span> n <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span> <span class="token keyword">return</span> <span class="token number">0</span>

            <span class="token comment"># B = Beatty sequence</span>
            <span class="token comment"># r = any irrational number greater than 1 (in our case, sqrt(2))</span>
            <span class="token comment"># n = any positive integer (in our case, the input)</span>
            <span class="token comment"># s = 2 + sqrt(2)</span>
            Br_n <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>r <span class="token operator">*</span> n<span class="token punctuation">)</span>
            Br_n_s <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>Decimal<span class="token punctuation">(</span>Br_n<span class="token punctuation">)</span> <span class="token operator">/</span> s<span class="token punctuation">)</span>

            <span class="token comment"># https://oeis.org/A001951</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span>Br_n <span class="token operator">*</span> <span class="token punctuation">(</span>Br_n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">-</span> solve<span class="token punctuation">(</span>Br_n_s<span class="token punctuation">)</span> <span class="token operator">-</span> Br_n_s <span class="token operator">*</span> <span class="token punctuation">(</span>Br_n_s <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>

        <span class="token keyword">return</span> <span class="token builtin">str</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">(</span>solve<span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment"># Test cases</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>solution<span class="token punctuation">(</span><span class="token string">"5"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># 19</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>solution<span class="token punctuation">(</span><span class="token string">"77"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># 4208</span>
</code></pre>
<hr>
<h2 id="tags"><a aria-hidden="true" class="anchor-heading icon-link" href="#tags"></a>Tags</h2>
<ol>
<li><a title="Private" href="https://wiki.dendron.so/notes/hfyvYGJZQiUwQaaxQO27q.html" target="_blank" class="private">python (Private)</a></li>
<li><a title="Private" href="https://wiki.dendron.so/notes/hfyvYGJZQiUwQaaxQO27q.html" target="_blank" class="private">level-5 (Private)</a></li>
<li><a title="Private" href="https://wiki.dendron.so/notes/hfyvYGJZQiUwQaaxQO27q.html" target="_blank" class="private">foobar (Private)</a></li>
<li><a title="Private" href="https://wiki.dendron.so/notes/hfyvYGJZQiUwQaaxQO27q.html" target="_blank" class="private">google (Private)</a></li>
</ol></div></div><div style="padding-left:10px;padding-right:10px" class="ant-col ant-col-xs-0 ant-col-md-6"><div><div class=""><div class="ant-anchor-wrapper dendron-toc" style="max-height:calc(100vh - 64px);z-index:1"><div class="ant-anchor"><div class="ant-anchor-ink"><span class="ant-anchor-ink-ball"></span></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#instructions" title="Instructions">Instructions</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#test-cases" title="Test cases">Test cases</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#solution" title="Solution">Solution</a></div></div></div></div></div></div></div></div></div></div></div><div class="ant-divider ant-divider-horizontal" role="separator"></div><footer class="ant-layout-footer" style="padding:0 24px 24px"></footer></main></section></section></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"note":{"id":"zer6szds0we2lk3340ffup2","title":"Dodge the Lasers","desc":"","updated":1666221838933,"created":1665856307482,"tags":["python","level-5","foobar","google"],"custom":{},"fname":"foobar.dodge-the-lasers","type":"note","vault":{"fsPath":".","selfContained":true,"name":"bits-and-bobbles"},"contentHash":"bba9dedaa5bdf9c94295d5f5e12d97cd","links":[{"type":"frontmatterTag","from":{"fname":"foobar.dodge-the-lasers","id":"zer6szds0we2lk3340ffup2","vaultName":"bits-and-bobbles"},"value":"tags.python","alias":"python","xvault":false,"to":{"fname":"tags.python"}},{"type":"frontmatterTag","from":{"fname":"foobar.dodge-the-lasers","id":"zer6szds0we2lk3340ffup2","vaultName":"bits-and-bobbles"},"value":"tags.level-5","alias":"level-5","xvault":false,"to":{"fname":"tags.level-5"}},{"type":"frontmatterTag","from":{"fname":"foobar.dodge-the-lasers","id":"zer6szds0we2lk3340ffup2","vaultName":"bits-and-bobbles"},"value":"tags.foobar","alias":"foobar","xvault":false,"to":{"fname":"tags.foobar"}},{"type":"frontmatterTag","from":{"fname":"foobar.dodge-the-lasers","id":"zer6szds0we2lk3340ffup2","vaultName":"bits-and-bobbles"},"value":"tags.google","alias":"google","xvault":false,"to":{"fname":"tags.google"}}],"anchors":{"instructions":{"type":"header","text":"Instructions","value":"instructions","line":13,"column":0,"depth":2},"test-cases":{"type":"header","text":"Test cases","value":"test-cases","line":34,"column":0,"depth":3},"solution":{"type":"header","text":"Solution","value":"solution","line":48,"column":0,"depth":2}},"children":[],"parent":"vm8lo115nu0nbqvdz24ugf1","data":{}},"body":"\u003ch1 id=\"dodge-the-lasers\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#dodge-the-lasers\"\u003e\u003c/a\u003eDodge the Lasers\u003c/h1\u003e\n\u003ch2 id=\"instructions\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#instructions\"\u003e\u003c/a\u003eInstructions\u003c/h2\u003e\n\u003cp\u003eOh no! You've managed to escape Commander Lambda's collapsing space station in an escape pod with the rescued bunny workers - but Commander Lambda isnt about to let you get away that easily. Lambda sent an elite fighter pilot squadron after you -- and they've opened fire!\u003c/p\u003e\n\u003cp\u003eFortunately, you know something important about the ships trying to shoot you down. Back when you were still Lambda's assistant, the Commander asked you to help program the aiming mechanisms for the starfighters. They undergo rigorous testing procedures, but you were still able to slip in a subtle bug. The software works as a time step simulation: if it is tracking a target that is accelerating away at 45 degrees, the software will consider the targets acceleration to be equal to the square root of 2, adding the calculated result to the targets end velocity at each timestep. However, thanks to your bug, instead of storing the result with proper precision, it will be truncated to an integer before adding the new velocity to your current position.  This means that instead of having your correct position, the targeting software will erringly report your position as \u003ccode\u003esum(i=1..n, floor(i*sqrt(2)))\u003c/code\u003e - not far enough off to fail Commander Lambdas testing, but enough that it might just save your life.\u003c/p\u003e\n\u003cp\u003eIf you can quickly calculate the target of the starfighters' laser beams to know how far off they'll be, you can trick them into shooting an asteroid, releasing dust, and concealing the rest of your escape.  Write a function solution(str_n) which, given the string representation of an integer n, returns the sum of \u003ccode\u003e(floor(1*sqrt(2)) + floor(2*sqrt(2)) + ... + floor(n*sqrt(2)))\u003c/code\u003e as a string. That is, for every number i in the range 1 to n, it adds up all of the integer portions of \u003ccode\u003ei*sqrt(2)\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eFor example, if str_n was \"5\", the solution would be calculated as\u003c/p\u003e\n\u003cpre class=\"language-text\"\u003e\u003ccode class=\"language-text\"\u003efloor(1*sqrt(2)) +\nfloor(2*sqrt(2)) +\nfloor(3*sqrt(2)) +\nfloor(4*sqrt(2)) +\nfloor(5*sqrt(2))\n= 1+2+4+5+7 = 19\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eso the function would return \"19\".\u003c/p\u003e\n\u003cp\u003estr_n will be a positive integer between 1 and 10^100, inclusive. Since n can be very large (up to 101 digits!), using just sqrt(2) and a loop won't work. Sometimes, it's easier to take a step back and concentrate not on what you have in front of you, but on what you don't.\u003c/p\u003e\n\u003ch3 id=\"test-cases\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#test-cases\"\u003e\u003c/a\u003eTest cases\u003c/h3\u003e\n\u003cp\u003eYour code should pass the following test cases.\u003c/p\u003e\n\u003cp\u003eNote that it may also be run against hidden test cases not shown here.\u003c/p\u003e\n\u003cp\u003eInput: \u003ccode\u003esolution.solution('77')\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eOutput: \u003ccode\u003e4208\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eInput: \u003ccode\u003esolution.solution('5')\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eOutput: \u003ccode\u003e19\u003c/code\u003e\u003c/p\u003e\n\u003ch2 id=\"solution\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#solution\"\u003e\u003c/a\u003eSolution\u003c/h2\u003e\n\u003cp\u003eGiven infinite time and resources, the following would work perfectly:\u003c/p\u003e\n\u003cpre class=\"language-py\"\u003e\u003ccode class=\"language-py\"\u003e\u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e math \u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e sqrt\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e floor\n\n\u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003esolution\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003estr_n\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n    n \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token builtin\"\u003eint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003estr_n\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n    mod \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e sqrt\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e2\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token builtin\"\u003estr\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token builtin\"\u003esum\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token builtin\"\u003eint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003efloor\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ex \u003cspan class=\"token operator\"\u003e*\u003c/span\u003e mod\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e x \u003cspan class=\"token keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"token builtin\"\u003erange\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003en \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e# Test cases\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eprint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003esolution\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"5\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token comment\"\u003e# 19\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eprint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003esolution\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"77\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token comment\"\u003e# 4208\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eHowever, this is not the case. The test cases are very large, and the time limit is very short. We need to find a way to optimize this.\u003c/p\u003e\n\u003cp\u003eAfter doing some research (I am not yet very well-versed in mathematics), I was able to finalize the following solution:\u003c/p\u003e\n\u003cpre class=\"language-py\"\u003e\u003ccode class=\"language-py\"\u003e\u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e decimal \u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e Decimal\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e localcontext\n\n\u003cspan class=\"token comment\"\u003e# https://towardsdatascience.com/dodge-the-lasers-fantastic-question-from-googles-hiring-challenge-72363d95fec\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003esolution\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003estr_n\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n    n \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e Decimal\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003estr_n\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003ewith\u003c/span\u003e localcontext\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eas\u003c/span\u003e ctx\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n        ctx\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eprec \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token number\"\u003e101\u003c/span\u003e\n        r \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e Decimal\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e2\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003esqrt\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n        s \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token number\"\u003e2\u003c/span\u003e \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e r\n\n        \u003cspan class=\"token comment\"\u003e# https://en.wikipedia.org/wiki/Beatty_sequence\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003esolve\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003en\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n            \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e n \u003cspan class=\"token operator\"\u003e==\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\n\n            \u003cspan class=\"token comment\"\u003e# B = Beatty sequence\u003c/span\u003e\n            \u003cspan class=\"token comment\"\u003e# r = any irrational number greater than 1 (in our case, sqrt(2))\u003c/span\u003e\n            \u003cspan class=\"token comment\"\u003e# n = any positive integer (in our case, the input)\u003c/span\u003e\n            \u003cspan class=\"token comment\"\u003e# s = 2 + sqrt(2)\u003c/span\u003e\n            Br_n \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token builtin\"\u003eint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003er \u003cspan class=\"token operator\"\u003e*\u003c/span\u003e n\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n            Br_n_s \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token builtin\"\u003eint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eDecimal\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eBr_n\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e/\u003c/span\u003e s\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\n            \u003cspan class=\"token comment\"\u003e# https://oeis.org/A001951\u003c/span\u003e\n            \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eBr_n \u003cspan class=\"token operator\"\u003e*\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eBr_n \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e/\u003c/span\u003e \u003cspan class=\"token number\"\u003e2\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e solve\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eBr_n_s\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e Br_n_s \u003cspan class=\"token operator\"\u003e*\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eBr_n_s \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\n        \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token builtin\"\u003estr\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token builtin\"\u003eint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003esolve\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003en\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e# Test cases\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eprint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003esolution\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"5\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token comment\"\u003e# 19\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eprint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003esolution\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"77\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token comment\"\u003e# 4208\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003chr\u003e\n\u003ch2 id=\"tags\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#tags\"\u003e\u003c/a\u003eTags\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003e\u003ca title=\"Private\" href=\"https://wiki.dendron.so/notes/hfyvYGJZQiUwQaaxQO27q.html\" target=\"_blank\" class=\"private\"\u003epython (Private)\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca title=\"Private\" href=\"https://wiki.dendron.so/notes/hfyvYGJZQiUwQaaxQO27q.html\" target=\"_blank\" class=\"private\"\u003elevel-5 (Private)\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca title=\"Private\" href=\"https://wiki.dendron.so/notes/hfyvYGJZQiUwQaaxQO27q.html\" target=\"_blank\" class=\"private\"\u003efoobar (Private)\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca title=\"Private\" href=\"https://wiki.dendron.so/notes/hfyvYGJZQiUwQaaxQO27q.html\" target=\"_blank\" class=\"private\"\u003egoogle (Private)\u003c/a\u003e\u003c/li\u003e\n\u003c/ol\u003e","noteIndex":{"id":"igmh0dqdu0a6b80x03hhek7","title":"Root","desc":"The base of the project tree.","updated":1669496499921,"created":1663712926920,"custom":{"nav_order":0,"permalink":"/"},"fname":"root","type":"note","vault":{"fsPath":".","selfContained":true,"name":"bits-and-bobbles"},"contentHash":"9b7c0238313c23f1c68b7df7aed0ce98","links":[{"type":"wiki","from":{"fname":"root","id":"igmh0dqdu0a6b80x03hhek7","vaultName":"bits-and-bobbles"},"value":"stack-overflow","alias":"Stack Overflow","position":{"start":{"line":8,"column":3,"offset":311},"end":{"line":8,"column":36,"offset":344},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"stack-overflow"}},{"type":"wiki","from":{"fname":"root","id":"igmh0dqdu0a6b80x03hhek7","vaultName":"bits-and-bobbles"},"value":"unix-stack-exchange","alias":"Unix \u0026 Linux Stack Exchange","position":{"start":{"line":9,"column":3,"offset":347},"end":{"line":9,"column":54,"offset":398},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"unix-stack-exchange"}},{"type":"wiki","from":{"fname":"root","id":"igmh0dqdu0a6b80x03hhek7","vaultName":"bits-and-bobbles"},"value":"codewars","alias":"Codewars","position":{"start":{"line":10,"column":3,"offset":401},"end":{"line":10,"column":24,"offset":422},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"codewars"}},{"type":"wiki","from":{"fname":"root","id":"igmh0dqdu0a6b80x03hhek7","vaultName":"bits-and-bobbles"},"value":"codepen","alias":"Codepens","position":{"start":{"line":11,"column":3,"offset":425},"end":{"line":11,"column":23,"offset":445},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"codepen"}},{"type":"wiki","from":{"fname":"root","id":"igmh0dqdu0a6b80x03hhek7","vaultName":"bits-and-bobbles"},"value":"euler","alias":"Euler Project","position":{"start":{"line":12,"column":3,"offset":448},"end":{"line":12,"column":26,"offset":471},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"euler"}},{"type":"wiki","from":{"fname":"root","id":"igmh0dqdu0a6b80x03hhek7","vaultName":"bits-and-bobbles"},"value":"foobar","alias":"Google FooBar","position":{"start":{"line":13,"column":3,"offset":474},"end":{"line":13,"column":27,"offset":498},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"foobar"}},{"type":"wiki","from":{"fname":"root","id":"igmh0dqdu0a6b80x03hhek7","vaultName":"bits-and-bobbles"},"value":"hackthebox","alias":"HackTheBox Ops Notes","position":{"start":{"line":14,"column":3,"offset":501},"end":{"line":14,"column":38,"offset":536},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"hackthebox"}},{"type":"wiki","from":{"fname":"root","id":"igmh0dqdu0a6b80x03hhek7","vaultName":"bits-and-bobbles"},"value":"medium","alias":"Medium Articles","position":{"start":{"line":15,"column":3,"offset":539},"end":{"line":15,"column":29,"offset":565},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"medium"}},{"type":"wiki","from":{"fname":"root","id":"igmh0dqdu0a6b80x03hhek7","vaultName":"bits-and-bobbles"},"value":"cybersoc","alias":"CyberSoc","position":{"start":{"line":16,"column":3,"offset":568},"end":{"line":16,"column":24,"offset":589},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"cybersoc"}}],"anchors":{"welcome-to-bits-and-bobbles":{"type":"header","text":"Welcome to bits-and-bobbles","value":"welcome-to-bits-and-bobbles","line":8,"column":0,"depth":1},"whats-here":{"type":"header","text":"What's here?","value":"whats-here","line":12,"column":0,"depth":2}},"children":["onxeajmr7gys0sljngxqj91","b42r0s0g9g25atrilu3dwqb","0hdyi29cv9mqvatjv6zaj7q","1ug1cew47dmye00nz5trwaa","vm8lo115nu0nbqvdz24ugf1","yqqzccfk3pgp9zvpzpptltr","6jdidhs50140ik9c0nhx7kl","djibocawvr9giosnl1nlori","gn88vvdrli6x8uz1bg9a263"],"parent":null,"data":{},"body":"\n# Welcome to bits-and-bobbles\n\nThis is the root of my project, an assortment of fragments of code that I have written in the past or used frequently enough that I think they are worth sharing. Please feel free to use them as you see fit, and share and leave a star if you find them useful!\n\n## What's here?\n\n- [[Stack Overflow|stack-overflow]]\n- [[Unix \u0026 Linux Stack Exchange|unix-stack-exchange]]\n- [[Codewars|codewars]]\n- [[Codepens|codepen]]\n- [[Euler Project|euler]]\n- [[Google FooBar|foobar]]\n- [[HackTheBox Ops Notes|hackthebox]]\n- [[Medium Articles|medium]]\n- [[CyberSoc|cybersoc]]\n"},"collectionChildren":null,"customHeadContent":null,"config":{"version":5,"dev":{"enablePreviewV2":true,"enableSelfContainedVaults":true},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":true,"vaultSelectionModeOnCreate":"smart","leaveTrace":false,"bubbleUpCreateNew":true,"fuzzThreshold":0.2}},"randomNote":{},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"copyNoteLink":{"aliasMode":"title"},"templateHierarchy":"template"},"workspace":{"vaults":[{"fsPath":".","selfContained":true,"name":"bits-and-bobbles"}],"journal":{"dailyDomain":"daily","name":"journal","dateFormat":"y.MM.dd","addBehavior":"childOfDomain"},"scratch":{"name":"scratch","dateFormat":"y.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"task":{"name":"task","dateFormat":"y.MM.dd","addBehavior":"asOwnDomain","statusSymbols":{"":" ","wip":"w","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"taskCompleteStatus":["done","x"],"prioritySymbols":{"H":"high","M":"medium","L":"low"},"todoIntegration":false,"createTaskSelectionType":"selection2link"},"graph":{"zoomSpeed":1,"createStub":false},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"enableUserTags":true,"enableHashTags":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":false,"enableEditorDecorations":true,"maxPreviewsCached":10,"maxNoteLength":204800,"enableFullHierarchyNoteTitle":false},"preview":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableMermaid":true,"enablePrettyRefs":true,"enableKatex":true,"automaticallyShowPreview":false},"publishing":{"assetsPrefix":"/bits-and-bobbles","siteUrl":"https://ajmeese7.github.io","enableFMTitle":true,"enableNoteTitleForLink":true,"enableMermaid":true,"enablePrettyRefs":true,"enableKatex":true,"copyAssets":true,"siteHierarchies":["root"],"writeStubs":false,"siteRootDir":"docs","seo":{"title":"Dendron","description":"Personal Knowledge Space"},"github":{"enableEditLink":true,"editLinkText":"Edit this page on GitHub","editBranch":"main","editViewMode":"tree"},"enableSiteLastModified":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableRandomlyColoredTags":true,"enableTaskNotes":true,"enablePrettyLinks":true,"siteFaviconPath":"favicon.ico","siteIndex":"root","searchMode":"lookup"}}},"__N_SSG":true},"page":"/notes/[id]","query":{"id":"zer6szds0we2lk3340ffup2"},"buildId":"dO-yYPXKcLZfhjFGAxUDT","assetPrefix":"/bits-and-bobbles","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>